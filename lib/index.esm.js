'use client';
import n,{memo as e,forwardRef as t,useState as r,useRef as i,useEffect as o,useMemo as u,useImperativeHandle as a,useCallback as l}from"react";var c=function(){return c=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},c.apply(this,arguments)};var s="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;var d="index-module_slot_wrap__ZT-DX",f="index-module_slot__DpPgW",v="index-module_numbers__sqlqm",m="index-module_num__j6XH3";!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}(".index-module_slot_wrap__ZT-DX {\n  display: inline-block;\n  white-space: nowrap;\n}\n\n.index-module_slot__DpPgW {\n  display: inline-block;\n  overflow: hidden;\n  text-align: center;\n  vertical-align: middle;\n  will-change: transform;\n}\n\n.index-module_separator__7GhtE {\n  display: inline-block;\n  vertical-align: middle;\n  text-align: center;\n}\n\n.index-module_numbers__sqlqm {\n  display: block;\n}\n\n.index-module_num__j6XH3 {\n  display: block;\n}\n\n[aria-hidden=true] {\n  user-select: none;\n}");var h=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.filter(Boolean).join(" ")},p=function(n,e){for(var t=[],r=n;r<e;r+=1)t.push(r);return t},g=function(n,e){for(var t=[],r=n;r!==e;)t.push(r),10===(r+=1)&&(r=0);return t},y=function(n,e){var t=Math.random()*(e-n);return Math.floor(t+n)},b=function(n){for(var e,t=function(n,e,t){if(t||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}([],n,!0),r=t.length-1;r>0;r-=1){var i=Math.floor(Math.random()*(r+1));e=[t[i],t[r]],t[r]=e[0],t[i]=e[1]}return t};var A=e(t((function(e,t){var l,d,p=e.isNew,g=e.charClassName,y=e.numbersRef,A=e.active,C=e.isChanged,S=e.effectiveDuration,_=e.delay,N=e.duration,x=e.speed,E=e.value,w=e.startValue,M=e.disableStartValue,q=e.dummyList,D=e.hasSequentialDummyList,j=e.hasInfiniteList,O=e.valueClassName,T=e.numberSlotClassName,I=e.numberClassName,L=e.reverse,F=e.sequentialAnimationMode,k=e.useMonospaceWidth,R=e.maxNumberWidth,W=e.onFontHeightChange,P=r(!1),V=P[0],B=P[1],H=r(E),X=H[0],Y=H[1],z=i(),Z=i(E),G=i(null),J=r(0),U=J[0],K=J[1],Q=r(D?q:b(q)),$=Q[0],nn=Q[1],en=r(!1),tn=en[0],rn=en[1],on=U*(q.length+1);s((function(){rn(!0)}),[]),s((function(){var n,e;K(null!==(e=null===(n=G.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==e?e:0)}),[tn]),o((function(){A?requestAnimationFrame((function(){B(A)})):B(A)}),[A]),o((function(){var n=G.current;if(U&&n&&"undefined"!=typeof ResizeObserver){var e=new ResizeObserver((function(n){var e=n[0].contentRect.height;Math.abs(U-e)>1&&(null==W||W(e))}));return e.observe(n),function(){e.disconnect()}}}),[U,W]),u((function(){M&&(z.current=Z.current)}),[M]),o((function(){V&&(z.current=Z.current,Z.current=E,setTimeout((function(){return Y(E)}),F?0:S*x*N*1e3/q.length+1e3*_))}),[V,E,S,_,q.length,F,x,N]),o((function(){nn(D?q:b(q))}),[E,q,D]),a(t,(function(){return{refreshStyles:function(){var n,e;B(!0),K(null!==(e=null===(n=G.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==e?e:0),requestAnimationFrame((function(){B(!1)}))}}}));var un=function(){return $.map((function(e,t){return n.createElement("span",{key:t,className:h(m,I),"aria-hidden":"true"},e)}))},an=L?X:null!=w?w:X;F&&(an=L?X:null!==(l=null!=w?w:z.current)&&void 0!==l?l:X,F&&p&&!L&&(an=""));var ln=L&&null!=w?w:X;return F&&(ln=L&&null!==(d=null!=w?w:z.current)&&void 0!==d?d:X),n.createElement("span",{className:h(f,g),style:{display:"inline-block",width:tn&&k?R:void 0,height:tn?U:void 0}},n.createElement("span",{ref:y,className:h(v,T),style:c({transition:"none",transform:L?"translateY(-".concat(on,"px)"):"translateY(0px)"},V&&C&&{transform:L?"translateY(0px)":"translateY(-".concat(on,"px)"),transition:"transform ".concat(S,"s ").concat(_,"s ease-in-out")})},tn?n.createElement(n.Fragment,null,n.createElement("span",{className:h(m,I),"aria-hidden":"true",style:{height:U}},an),un(),n.createElement("span",{className:h(m,I,O),ref:G},ln),j?un():null):n.createElement("span",{className:h(m,I),"aria-hidden":"true"},null!=w?w:X)))})));var C=e(t((function(e,t){var c,f,v,m,b,C,S,_,N,x,E=e.value,w=e.startValue,M=e.startValueOnce,q=void 0!==M&&M,D=e.duration,j=void 0===D?.7:D,O=e.speed,T=void 0===O?1.4:O,I=e.delay,L=e.dummyCharacters,F=e.dummyCharacterCount,k=void 0===F?6:F,R=e.autoAnimationStart,W=void 0===R||R,P=e.containerClassName,V=e.charClassName,B=e.valueClassName,H=e.numberSlotClassName,X=e.numberClassName,Y=e.animateUnchanged,z=void 0!==Y&&Y,Z=e.hasInfiniteList,G=void 0!==Z&&Z,J=e.sequentialAnimationMode,U=void 0!==J&&J,K=e.useMonospaceWidth,Q=void 0!==K&&K,$=e.direction,nn=e.debounceDelay,en=e.animateOnVisible,tn=e.startFromLastDigit,rn=void 0!==tn&&tn,on=e.onAnimationStart,un=e.onAnimationEnd,an=function(n,e){var t=r(n),i=t[0],u=t[1];return o((function(){if(0===e)return u(n);var t=setTimeout((function(){u(n)}),e);return function(){clearTimeout(t)}}),[n,e]),i}(E,null!=nn?nn:0),ln=u((function(){return function(n){return Array.isArray(n)&&function(n){return"object"==typeof n}(n[0])}(an)?"":"object"==typeof an?JSON.stringify(an):an.toString()}),[an]),cn=r(!1),sn=cn[0],dn=cn[1],fn=i(),vn=i(null),mn=i(null),hn=i(w),pn=i([]),gn=u((function(){return"boolean"==typeof en?en:"object"==typeof en||void 0}),[en]),yn=u((function(){return"object"==typeof en?en.rootMargin:void 0}),[en]),bn=u((function(){return"object"==typeof en?en.triggerOnce:void 0}),[en]),An=i(!0),Cn=!gn&&W,Sn=i(null==w||Cn?an:w),_n=i(w),Nn=i(0),xn=i(0),En=r([]),wn=En[0],Mn=En[1],qn=i(),Dn=r(0),jn=Dn[0],On=Dn[1],Tn=r(),In=Tn[0],Ln=Tn[1],Fn=i(!1),kn=null!=w&&(!q||Nn.current<1),Rn=null!==(f=null===(c=fn.current)||void 0===c?void 0:c.dummyCharacterCount)&&void 0!==f?f:k,Wn=null!==(m=null===(v=fn.current)||void 0===v?void 0:v.duration)&&void 0!==m?m:j,Pn=i({onAnimationStart:on,onAnimationEnd:un});Pn.current={onAnimationStart:on,onAnimationEnd:un};var Vn=i(!1),Bn=l((function(){var n=mn.current;if(n){var e=p(0,10).map((function(e){var t=document.createElement("span");t.className=null!=B?B:"",t.style.position="absolute",t.style.top="0",t.style.left="-9999px",t.style.visibility="hidden",t.textContent=e.toString(),n.appendChild(t);var r=t.getBoundingClientRect().width;return n.removeChild(t),r})),t=Math.max.apply(Math,e);Ln(t)}}),[B]);s((function(){var n;Bn(),null===(n=document.fonts)||void 0===n||n.ready.then((function(){Bn()}))}),[]),o((function(){Mn(p(0,Rn*j*T-1).map((function(n){if(!L)return y(0,10);var e=n>=L.length?y(0,L.length):n;return L[e]})))}),[L,Rn,T,j]),Sn.current!==an&&Fn.current&&xn.current>0&&(_n.current=Sn.current,Sn.current=an);var Hn=Array.isArray(_n.current)?_n.current:null!==(C=null===(b=_n.current)||void 0===b?void 0:b.toString().split(""))&&void 0!==C?C:[],Xn=Array.isArray(Sn.current)?Sn.current:null!==(_=null===(S=Sn.current)||void 0===S?void 0:S.toString().split(""))&&void 0!==_?_:[],Yn=Array.isArray(hn.current)?hn.current:null!==(x=null===(N=hn.current)||void 0===N?void 0:N.toString().split(""))&&void 0!==x?x:[],zn=u((function(){return Array.isArray(an)?an:null==an?void 0:an.toString().split("")}),[an]),Zn=u((function(){return Array.isArray(w)?w:null==w?void 0:w.toString().split("")}),[w]),Gn=Hn.length!==Xn.length,Jn=[];Xn.forEach((function(n,e){var t=Xn.length-e-1,r=kn?Yn:Hn;(Xn[t]!==r[t]||Gn||z)&&Jn.push(t)})),rn||Jn.reverse();var Un=u((function(){return I||Math.min(.1,Wn/zn.length)}),[Wn,zn.length,I]),Kn=l((function(){var n,e,t;null===(e=(n=Pn.current).onAnimationEnd)||void 0===e||e.call(n),Vn.current=!1,null===(t=mn.current)||void 0===t||t.removeEventListener("transitionend",Kn)}),[]),Qn=l((function(){var n,e,t;qn.current&&window.cancelAnimationFrame(qn.current),Vn.current&&Kn(),Vn.current=!0,null===(n=mn.current)||void 0===n||n.addEventListener("transitionend",Kn),null===(t=(e=Pn.current).onAnimationStart)||void 0===t||t.call(e),dn(!1),Nn.current=xn.current,Nn.current+=1,window.requestAnimationFrame((function(){var n;null===(n=mn.current)||void 0===n||n.offsetWidth,qn.current=requestAnimationFrame((function(){xn.current+=1,dn(!0)}))}))}),[Kn]),$n=l((function(n){var e,t,r=kn?w:_n.current;if(null==r)return[];var i=r.toString(),o=an.toString(),u=i[n]||"0",a=o[n]||"0";if(u===a||!/\d/.test(u)||!/\d/.test(a))return[];var l=parseInt(u,10),c=parseInt(a,10),s=l<c,d=s?g((l+1)%10,c):g((c+1)%10,l);return"bottom-up"!==(null!==(t=null===(e=fn.current)||void 0===e?void 0:e.direction)&&void 0!==t?t:$)||s?d:d.reverse()}),[kn,an,w,$]),ne=l((function(){pn.current.forEach((function(n){n.refreshStyles()})),Bn()}),[Bn]);o((function(){(Fn.current||null!=_n.current)&&(Fn.current||null==hn.current)&&(Fn.current||Cn)&&Qn()}),[ln,Qn,Cn]),o((function(){Cn&&Qn()}),[Cn,Qn]),o((function(){requestAnimationFrame((function(){Fn.current=!0}))}),[]),a(t,(function(){return{startAnimation:ae,refreshStyles:ne,reload:function(){return On((function(n){return n+1}))}}}));var ee=null==w||Cn||0!==Nn.current?zn:Zn||[],te=((null==Zn?void 0:Zn.length)||0)-ee.length,re=function(n){var e,t=i(n),r=i(t.current),u=n.map(String).join(","),a=null===(e=t.current)||void 0===e?void 0:e.map(String).join(",");return o((function(){a!==u&&(r.current=(null==a?void 0:a.split(","))||[],t.current=u.split(","))}),[u,a]),{getPrevDependencies:l((function(){return r.current}),[]),setPrevDependenciesToSameAsCurrent:l((function(){r.current=t.current}),[])}}(ee),ie=re.getPrevDependencies,oe=re.setPrevDependenciesToSameAsCurrent,ue=ee.length-ie().length,ae=l((function(n){null==w||q||(_n.current=void 0),fn.current=n,Qn(),oe()}),[w,q,Qn,oe]),le=u((function(){return function(n,e){var t;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){n.apply(void 0,r)}),e)}}((function(){ne()}),0)}),[ne]);return o((function(){if(gn&&vn.current){var n=new IntersectionObserver((function(t){t[0].isIntersecting&&An.current&&(ae(),An.current=!1,bn&&(n.disconnect(),e.disconnect()))}),{rootMargin:yn,threshold:1}),e=new IntersectionObserver((function(n){n[0].isIntersecting||(An.current=!0)}),{threshold:0});return n.observe(vn.current),e.observe(vn.current),function(){n.disconnect(),e.disconnect()}}}),[gn,yn,bn,ae]),n.createElement("span",{key:jn,ref:vn,className:h(P,d)},ee.map((function(e,t){var r,i,o=Jn.includes(t),u=(o?Jn.indexOf(t):0)*Un,a=_n.current,l=null!=w&&!!q&&Nn.current>1,c=(null==a?void 0:a.toString()[t])||"0",s=(null==an?void 0:an.toString()[t])||"0",d=/\d/.test(c)&&/\d/.test(s)&&parseInt(c,10)>parseInt(s,10);return(null===(r=fn.current)||void 0===r?void 0:r.direction)&&(d="top-down"===(null===(i=fn.current)||void 0===i?void 0:i.direction)),$&&(d="top-down"===$),n.createElement(A,{key:ee.length-t-1,index:t,isNew:ue>0&&t<ue,maxNumberWidth:In,numbersRef:mn,active:sn,isChanged:o,charClassName:V,effectiveDuration:Wn,delay:u,value:e,startValue:l||null==Zn?void 0:Zn[t+te],disableStartValue:l,dummyList:U&&(!Cn||xn.current>1)?$n(t):wn,hasSequentialDummyList:U&&(!Cn||xn.current>1),hasInfiniteList:G,valueClassName:B,numberSlotClassName:H,numberClassName:X,reverse:d,sequentialAnimationMode:U,useMonospaceWidth:Q,onFontHeightChange:le,speed:T,duration:j,ref:function(n){n&&pn.current.push(n)}})})))})));export{C as default};
//# sourceMappingURL=index.esm.js.map
